function checkScroll(){window.requestAnimationFrame(updateProgress)}window.addEventListener("load",(e=>{var t=document.querySelector(".article-topbar-navigation-container"),o=document.querySelector("#topbar-separator"),n=o.querySelectorAll(".globe-grid-section-separator-grey-circle"),r=0,i=!1;function c(e){e>0?(t.classList.add("article-topbar-navigation-shadow-on-scroll"),n.forEach((e=>e.style.transform="scale(0)"))):(t.classList.remove("article-topbar-navigation-shadow-on-scroll"),n.forEach((e=>e.style.transform="scale(1)")))}window.addEventListener("scroll",(function(e){r=window.scrollY,i||(window.requestAnimationFrame((function(){c(r),i=!1})),i=!0)})),window.addEventListener("resize",(function(){createCircles(".globe-grid-section-separator-grey-container","globe-grid-section-separator-grey-circle"),n=o.querySelectorAll(".globe-grid-section-separator-grey-circle"),c(window.pageYOffset)})),c(window.pageYOffset)})),window.removeEventListener("scroll",updateProgress),window.addEventListener("scroll",checkScroll),checkScroll();const circles=Array.from(document.querySelectorAll(".scroll-progress-indicator-circle")).slice(0,22),target=document.querySelector("#last-article-content");function updateProgress(){const e=window.innerHeight,t=target.getBoundingClientRect().bottom+window.scrollY,o=window.scrollY/(t-e),n=Math.round(22*o);circles.forEach((e=>{e.dataset.order<n?e.classList.add("active"):e.classList.remove("active")}));const r=document.querySelector(".article-topbar-navigation-icon.close-article"),i=document.querySelector(".article-topbar-navigation-icon.finished-reading");o>=1?(r.style.transform="scale(0)",i.style.transform="scale(1)",circles[circles.length-1].classList.add("active")):(r.style.transform="scale(1)",i.style.transform="scale(0)",circles[circles.length-1].classList.remove("active"))}circles.forEach(((e,t)=>{const o=t/circles.length*2*Math.PI-Math.PI/2;e.style.transform=`translate(${22*Math.cos(o)}px, ${22*Math.sin(o)}px)`,e.dataset.order=Math.round(t/circles.length*22)})),$(document).ready((function(){$(".article-topbar-navigation-close-button").hover((function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(0)")}),(function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(1)")})),$(".article-topbar-navigation-close-button").on("mousedown",(function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(0)")})),$(".article-topbar-navigation-close-button").on("mouseup",(function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(1)")}))}));let body=document.querySelector("body"),scrollPosition=0,searchPanel=document.querySelector("#article-search-panel");function saveScrollPosition(){scrollPosition=window.pageYOffset||document.documentElement.scrollTop,localStorage.setItem("scrollPosition",scrollPosition)}let observer=new MutationObserver((function(e){e.forEach((function(e){searchPanel.classList.contains("show")?(saveScrollPosition(),body.style.overflowY="scroll",body.style.position="fixed",body.style.top=-scrollPosition+"px"):(body.style.overflowY="",body.style.position="",window.scrollTo(0,localStorage.getItem("scrollPosition")||0))}))}));observer.observe(searchPanel,{attributes:!0}),window.addEventListener("beforeunload",(function(){localStorage.setItem("scrollPosition",window.pageYOffset||document.documentElement.scrollTop)})),document.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("scrollPosition")&&window.scrollTo(0,localStorage.getItem("scrollPosition"))}));var imageContainer=document.querySelector(".article-left-view-image-container"),sections=document.querySelectorAll(".article-section"),offset=64;function getVisibleSection(){window.scrollY||window.pageYOffset;for(var e=!1,t=0;t<sections.length;t++){var o=sections[t],n=o.getBoundingClientRect();if(0===t&&n.bottom<offset&&(e=!0),n.top-offset<=window.innerHeight&&n.bottom-offset>=0)return{section:o,index:t,pastFirstSection:e}}return{pastFirstSection:e}}function debounce(e,t){var o;return function(){var n=this,r=arguments;clearTimeout(o),o=setTimeout((function(){e.apply(n,r)}),t)}}function updateImageContainerPosition(){var e=-100*getVisibleSection().index,t=parseFloat(getComputedStyle(imageContainer).transform.split(",")[5])||0,o=Math.abs(t-e),n=Math.min(.2+o/100,1);requestAnimationFrame((()=>{imageContainer.style.transition=`transform ${n}s ease-in-out`,imageContainer.style.transform=`translateY(${e}vh)`}))}var debouncedUpdateImageContainerPosition=debounce(updateImageContainerPosition,10);function capitalizeTitle(e){for(var t=e.split(" "),o=["a","an","the","and","but","or","for","of","in","on","to"],n=["pre","anti","co","sub","re","un","non","de","dis","ex","in","ir","mis","out","over","post","pro","semi","under","up"],r=0;r<t.length;r++)if(0!=r&&r!=t.length-1&&o.includes(t[r])?t[r]=t[r].toLowerCase():t[r]=t[r][0].toUpperCase()+t[r].slice(1),t[r].includes("-")){var i=t[r].split("-");n.includes(i[0])||(i[0]=i[0][0].toUpperCase()+i[0].slice(1)),i[1]=i[1][0].toUpperCase()+i[1].slice(1),t[r]=i.join("-")}return t.join(" ")}updateImageContainerPosition(),window.addEventListener("scroll",debouncedUpdateImageContainerPosition);for(var elements=document.querySelectorAll(".article-heading.h1"),i=0;i<elements.length;i++){var originalTitle=elements[i].innerText,capitalizedTitle=capitalizeTitle(originalTitle);elements[i].innerText=capitalizedTitle}function createBlockquoteCircles(e,t){const o=document.querySelector("blockquote p"),n=document.querySelectorAll(e),r=new ResizeObserver((e=>{for(let o of e){const e=o.contentRect.height;n.forEach((o=>{o.style.height=e+"px",o.innerHTML="";const n=Math.floor(e/6);for(let e=0;e<n;e++){const e=document.createElement("div");e.classList.add(t),o.appendChild(e)}o.lastChild&&(o.lastChild.style.marginBottom="0")}))}}));r.observe(o)}createBlockquoteCircles(".blockquote-column","blockquote-circle"),document.addEventListener("DOMContentLoaded",(function(){function e(e,t,o){const n=document.querySelector(e);for(let e=0;e<t;e++){const e=document.createElement("div");e.classList.add("globe-grid-quote-attribution-circle"),n.appendChild(e)}n.style.flexDirection=o}e(".globe-grid-quote-attribution-circles-left",4,"column"),e(".globe-grid-quote-attribution-circles-bottom",5,"row")})),window.addEventListener("load",(function(){document.querySelectorAll(".article-topbar-navigation-container a, div.description-icon").forEach((function(e){e.addEventListener("dragstart",(function(e){e.preventDefault()}))}))}));