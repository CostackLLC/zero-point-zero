document.addEventListener("DOMContentLoaded",function(){function isMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}var isMobile=window.matchMedia("only screen and (max-width: 767px)").matches;if(isMobile&&isMobileDevice()){var containers=[".article-left-view-container"];containers.forEach(function(containerClass){var container=document.querySelector(containerClass);if(container){container.parentNode.removeChild(container)}});var scriptsToPrevent=["https://cdn.jsdelivr.net/gh/costackllc/zero-point-zero@v0.0.205/article-left-view.min.js"];scriptsToPrevent.forEach(function(src){var scripts=document.querySelectorAll('script[src="'+src+'"]');scripts.forEach(function(script){script.parentNode.removeChild(script)})})}});function setThemeFromCookie(){document.body.className=isThemeSelected()?"dark-mode":""}function setThemeSwitchState(){const isDarkMode=isThemeSelected();updateIconsDisplay(isDarkMode)}function isThemeSelected(){const hasDarkCookie=document.cookie.match(/theme=dark/i)!=null;const hasLightCookie=document.cookie.match(/theme=light/i)!=null;return hasDarkCookie?true:hasLightCookie?false:window.matchMedia("(prefers-color-scheme: dark)").matches}function toggleTheme(){const isDarkMode=!document.body.classList.contains("dark-mode");document.body.classList.toggle("dark-mode");document.cookie="theme="+(isDarkMode?"dark":"light");updateIconsDisplay(isDarkMode)}function updateIconsDisplay(isDarkMode){const iconPairs={account:["topbar-button-icon-light-theme-account","topbar-button-icon-dark-theme-account"],search:["topbar-button-icon-light-theme-search","topbar-button-icon-dark-theme-search"],toc:["topbar-button-icon-light-theme-toc","topbar-button-icon-dark-theme-toc"],comments:["topbar-button-icon-light-theme-comments","topbar-button-icon-dark-theme-comments"],"theme-toggle":["topbar-button-icon-light-theme-theme-toggle","topbar-button-icon-dark-theme-theme-toggle"]};for(const[iconType,ids]of Object.entries(iconPairs)){const lightIcon=document.getElementById(ids[0]);const darkIcon=document.getElementById(ids[1]);if(lightIcon&&darkIcon){lightIcon.style.display=isDarkMode?"none":"block";darkIcon.style.display=isDarkMode?"block":"none"}}}(function(){setThemeFromCookie();setThemeSwitchState();document.querySelector(".article-topbar-navigation-button.toggle-theme").onclick=toggleTheme})();const isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;if(isTouchDevice){window.addEventListener("load",()=>{const topbarSeparator=document.querySelector("#topbar-separator");const navbar=document.querySelector(".article-topbar-navigation-container");const body=document.body;function handleTopbarScroll(){const scrollPos=window.scrollY;if(scrollPos>0){topbarSeparator.style.visibility="hidden";navbar.classList.add("article-topbar-navigation-shadow-on-scroll");body.classList.add("body-bg-color-on-scroll")}else{topbarSeparator.style.visibility="visible";navbar.classList.remove("article-topbar-navigation-shadow-on-scroll");body.classList.remove("body-bg-color-on-scroll")}}function throttleScrollTouch(func,limit){let ticking=false;return function(){if(!ticking){window.requestAnimationFrame(()=>{func();ticking=false});ticking=true}}}window.addEventListener("scroll",throttleScrollTouch(handleTopbarScroll,250));window.addEventListener("resize",()=>{createSectionSeparatorCircles("#topbar-separator","globe-grid-section-separator-grey-circle");handleTopbarScroll()});handleTopbarScroll()})}else{window.addEventListener("load",()=>{const topbarSeparator=document.querySelector("#topbar-separator");const navbar=document.querySelector(".article-topbar-navigation-container");const body=document.body;let circles=topbarSeparator.getElementsByClassName("globe-grid-section-separator-grey-circle");function handleTopbarScroll(){const scrollPos=window.scrollY;const circlesArray=Array.from(circles);if(scrollPos>0){circlesArray.forEach(circle=>circle.style.transform="scale(0)");navbar.classList.add("article-topbar-navigation-shadow-on-scroll");body.classList.add("body-bg-color-on-scroll")}else{circlesArray.forEach(circle=>circle.style.transform="scale(1)");navbar.classList.remove("article-topbar-navigation-shadow-on-scroll");body.classList.remove("body-bg-color-on-scroll")}}function throttleScrollNonTouch(func,limit){let ticking=false;return function(){if(!ticking){window.requestAnimationFrame(()=>{func();ticking=false});ticking=true}}}window.addEventListener("scroll",throttleScrollNonTouch(handleTopbarScroll,250));window.addEventListener("resize",()=>{createSectionSeparatorCircles("#topbar-separator","globe-grid-section-separator-grey-circle");circles=topbarSeparator.getElementsByClassName("globe-grid-section-separator-grey-circle");handleTopbarScroll()});handleTopbarScroll()})}function createSectionSeparatorCircles(selector,circleClass){const containers=document.querySelectorAll(selector);containers.forEach(container=>{const containerWidth=container.clientWidth;const circleSize=6;const numCircles=Math.floor(containerWidth/circleSize);container.innerHTML="";for(let i=0;i<numCircles;i++){const circle=document.createElement("div");circle.classList.add(circleClass);container.appendChild(circle)}if(container.lastChild){container.lastChild.style.marginRight="0"}})}function throttleResize(func,limit){let inThrottle;return function(){const args=arguments;const context=this;if(!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=>inThrottle=false,limit)}}}createSectionSeparatorCircles(".globe-grid-section-separator-grey-container","globe-grid-section-separator-grey-circle");window.addEventListener("resize",throttleResize(()=>{createSectionSeparatorCircles(".globe-grid-section-separator-grey-container","globe-grid-section-separator-grey-circle")},250));window.addEventListener("load",function(){const updateCircles=function(){document.querySelectorAll(".moon-grid-link-container").forEach(function(container,index,array){const link=container.querySelector(".moon-grid-link");const text=link.textContent.trim();link.innerHTML="";const span=document.createElement("span");span.textContent=text;span.style.position="relative";span.style.display="inline-block";link.appendChild(span);const width=span.offsetWidth;const circleCount=Math.floor(width/6);const underlineWidth=6*(circleCount+1);const circleUnderline=document.createElement("div");circleUnderline.classList.add("moon-grid-link-circle-underline");circleUnderline.style.width=underlineWidth+"px";for(let i=0;i<circleCount+1;i++){const circle=document.createElement("div");circle.classList.add("moon-grid-link-circle");circleUnderline.appendChild(circle)}const extraSpace=underlineWidth-width-3;const paddingLeft=index===0?0:extraSpace/2;const paddingRight=index===array.length-1?0:extraSpace/2;span.style.paddingLeft=paddingLeft+"px";span.style.paddingRight=paddingRight+"px";span.appendChild(circleUnderline)})};updateCircles();let resizeTimer;window.addEventListener("resize",function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){requestAnimationFrame(updateCircles)},250)})});let lastWindowWidth=window.innerWidth;function throttleResizeLink(func,limit){let inThrottle;return function(){const args=arguments;const context=this;if(!inThrottle){func.apply(context,args);inThrottle=true;setTimeout(()=>inThrottle=false,limit)}}}function createUnderlines(){document.querySelectorAll(".globe-grid-link-container").forEach(container=>{const link=container.querySelector(".globe-grid-link");const existingSpans=link.querySelectorAll("span");if(existingSpans.length>0){existingSpans.forEach(span=>{const underline=span.querySelector(".globe-grid-link-circle-underline");if(underline){const spanWidth=span.offsetWidth;const circles=Math.floor(spanWidth/6);const underlineWidth=(circles+1)*6;underline.style.width=underlineWidth+"px";const paddingAdjustment=underlineWidth-spanWidth-3;const paddingLeft=span.previousSibling?paddingAdjustment/2:0;const paddingRight=span.nextSibling?paddingAdjustment/2:0;span.style.paddingLeft=paddingLeft+"px";span.style.paddingRight=paddingRight+"px"}})}else{const words=link.textContent.trim().split(/\s+/);link.innerHTML="";let wordGroups=[];let group="";words.forEach((word,index,array)=>{if(word.length<=2){let leftWord=group.split(" ").pop();let rightWord=array[index+1]||"";if(leftWord&&leftWord.length<=rightWord.length){group+=" "+word}else{if(group){wordGroups.push(group);group=""}word+=rightWord?" "+rightWord:"";if(rightWord){words.splice(index+1,1)}group=word}}else{if(group){wordGroups.push(group);group=""}group=word}});if(group){wordGroups.push(group)}wordGroups.forEach((group,index)=>{const span=document.createElement("span");span.textContent=group;span.style.position="relative";span.style.display="inline-block";if(index!==wordGroups.length-1){span.style.marginRight="3px"}link.appendChild(span);const underline=document.createElement("div");underline.classList.add("globe-grid-link-circle-underline");const spanWidth=span.offsetWidth;const circles=Math.floor(spanWidth/6);const underlineWidth=(circles+1)*6;underline.style.width=underlineWidth+"px";for(let i=0;i<circles+1;i++){const circle=document.createElement("div");circle.classList.add("globe-grid-link-circle");underline.appendChild(circle)}const paddingAdjustment=underlineWidth-spanWidth-3;const paddingLeft=index===0?0:paddingAdjustment/2;const paddingRight=index===wordGroups.length-1?0:paddingAdjustment/2;span.style.paddingLeft=paddingLeft+"px";span.style.paddingRight=paddingRight+"px";span.appendChild(underline)})}})}function createCircles(selector,circleClass){}createUnderlines();createCircles(".globe-grid-section-separator-grey-container","globe-grid-section-separator-grey-circle");window.addEventListener("resize",throttleResizeLink(function(){if(window.innerWidth!==lastWindowWidth){lastWindowWidth=window.innerWidth;requestAnimationFrame(function(){createUnderlines();createCircles(".globe-grid-section-separator-grey-container","globe-grid-section-separator-grey-circle")})}},250));function checkScroll(){window.requestAnimationFrame(updateProgress)}window.removeEventListener("scroll",updateProgress);window.addEventListener("scroll",checkScroll);checkScroll();const circles=Array.from(document.querySelectorAll(".scroll-progress-indicator-circle")).slice(0,22);const target=document.querySelector("#last-article-content");circles.forEach((circle,index)=>{const angle=index/circles.length*2*Math.PI-Math.PI/2;const radius=22;circle.style.transform=`translate(${radius*Math.cos(angle)}px, ${radius*Math.sin(angle)}px)`;circle.dataset.order=Math.round(index/circles.length*22)});function updateProgress(){const windowHeight=window.innerHeight;const targetRect=target.getBoundingClientRect();const targetBottomPosition=targetRect.bottom+window.scrollY;const progress=window.scrollY/(targetBottomPosition-windowHeight);const activeCircles=Math.round(progress*22);circles.forEach(circle=>{if(circle.dataset.order<activeCircles){circle.classList.add("active")}else{circle.classList.remove("active")}});const closeIcon=document.querySelector(".article-topbar-navigation-icon.close-article");const finishedReadingIcon=document.querySelector(".article-topbar-navigation-icon.finished-reading");if(progress>=1){closeIcon.style.transform="scale(0)";finishedReadingIcon.style.transform="scale(1)";circles[circles.length-1].classList.add("active")}else{closeIcon.style.transform="scale(1)";finishedReadingIcon.style.transform="scale(0)";circles[circles.length-1].classList.remove("active")}}$(document).ready(function(){$(".article-topbar-navigation-close-button").hover(function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(0)")},function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(1)")});$(".article-topbar-navigation-close-button").on("mousedown",function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(0)")});$(".article-topbar-navigation-close-button").on("mouseup",function(){$(".scroll-progress-indicator-wrapper").css("transform","scale(1)")})});let body=document.querySelector("body");let scrollPosition=0;let searchPanel=document.querySelector("#article-search-panel");function saveScrollPosition(){scrollPosition=window.pageYOffset||document.documentElement.scrollTop;localStorage.setItem("scrollPosition",scrollPosition)}let observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(searchPanel&&searchPanel.classList.contains("show")){saveScrollPosition();body.style.overflowY="scroll";body.style.position="fixed";body.style.top=-scrollPosition+"px"}else{body.style.overflowY="";body.style.position="";window.scrollTo(0,localStorage.getItem("scrollPosition")||0)}})});if(searchPanel){observer.observe(searchPanel,{attributes:true})}window.addEventListener("beforeunload",saveScrollPosition);document.addEventListener("DOMContentLoaded",function(){if(localStorage.getItem("scrollPosition")){window.scrollTo(0,localStorage.getItem("scrollPosition"))}});function capitalizeTitle(title){var words=title.split(" ");var lowerWords=["a","an","the","and","but","or","for","of","in","on","to"];var prefixes=["pre","anti","co","sub","re","un","non","de","dis","ex","in","ir","mis","out","over","post","pro","semi","under","up"];for(var i=0;i<words.length;i++){if(i==0||i==words.length-1||!lowerWords.includes(words[i])){words[i]=words[i][0].toUpperCase()+words[i].slice(1)}else{words[i]=words[i].toLowerCase()}if(words[i].includes("-")){var parts=words[i].split("-");if(!prefixes.includes(parts[0])){parts[0]=parts[0][0].toUpperCase()+parts[0].slice(1)}parts[1]=parts[1][0].toUpperCase()+parts[1].slice(1);words[i]=parts.join("-")}}return words.join(" ")}var elements=document.querySelectorAll(".article-heading.h1");for(var i=0;i<elements.length;i++){var originalTitle=elements[i].innerText;var capitalizedTitle=capitalizeTitle(originalTitle);elements[i].innerText=capitalizedTitle}function createBlockquoteCircles(selector,circleClass){const blockquoteParagraph=document.querySelector("blockquote p");const columns=document.querySelectorAll(selector);const resizeObserver=new ResizeObserver(entries=>{for(let entry of entries){const blockquoteHeight=entry.contentRect.height;columns.forEach(column=>{column.style.height=blockquoteHeight+"px";column.innerHTML="";const numCircles=Math.floor(blockquoteHeight/6);for(let i=0;i<numCircles;i++){const circle=document.createElement("div");circle.classList.add(circleClass);column.appendChild(circle)}if(column.lastChild){column.lastChild.style.marginBottom="0"}})}});resizeObserver.observe(blockquoteParagraph)}createBlockquoteCircles(".blockquote-column","blockquote-circle");document.addEventListener("DOMContentLoaded",function(){function createCircles(containerClass,count,direction){const container=document.querySelector(containerClass);for(let i=0;i<count;i++){const circle=document.createElement("div");circle.classList.add("globe-grid-quote-attribution-circle");container.appendChild(circle)}container.style.flexDirection=direction}createCircles(".globe-grid-quote-attribution-circles-left",4,"column");createCircles(".globe-grid-quote-attribution-circles-bottom",5,"row")});window.addEventListener("load",function(){var elements=document.querySelectorAll(".article-topbar-navigation-container a, div.description-icon");elements.forEach(function(el){el.addEventListener("dragstart",function(event){event.preventDefault()})})});